# AI 할 일 관리 웹 서비스 - 개발 규칙

## 1. 프로젝트 특성

### 1.1 기술 기반
- **Next.js 15 App Router** 기반의 웹 애플리케이션
- 서버 컴포넌트와 클라이언트 컴포넌트를 적절히 분리하여 사용
- App Router의 파일 기반 라우팅 시스템 활용

### 1.2 사용자 경험 최우선 원칙
- **로딩 상태 UI 필수 제공**: 모든 비동기 작업에 대해 로딩 인디케이터 표시
- **빈 상태(Empty State) UI 제공**: 데이터가 없을 때 사용자에게 명확한 안내 메시지와 액션 제공
- **오류 상태 UI 제공**: 오류 발생 시 사용자 친화적인 오류 메시지와 복구 옵션 제공
- **상호작용 지연 최소화**: 
  - Optimistic UI 업데이트 적극 활용
  - 필요한 경우 Suspense와 Streaming 활용
  - 불필요한 리렌더링 방지

### 1.3 오류 처리 절차
- **서버 측 오류 처리**:
  - 모든 API Route와 Server Action에서 try-catch로 예외 포착
  - 적절한 HTTP 상태 코드 반환
  - 개발 환경에서는 상세한 에러 로그 출력 (console.error)
  
- **클라이언트 측 오류 처리**:
  - React Error Boundary 활용
  - 모든 비동기 함수에서 예외 처리
  - 사용자에게는 한글로 친절한 메시지 제공
  - 개발 환경에서는 상세한 스택 트레이스 출력

- **오류 메시지 규칙**:
  - 사용자에게 표시되는 메시지는 반드시 한글로 작성
  - 기술적인 용어는 최대한 배제하고 일반 사용자가 이해할 수 있는 표현 사용
  - 예: "네트워크 연결을 확인해주세요" (O), "HTTP 500 Error" (X)

## 2. 기술 스택

### 2.1 핵심 프레임워크
- **Next.js 15**: App Router 사용
- **TypeScript**: 필수 사용, strict 모드 권장
- **React 19**: 최신 버전 활용

### 2.2 스타일링
- **Tailwind CSS**: 유틸리티 기반 스타일링
- **Shadcn/ui**: UI 컴포넌트 라이브러리
  - `components/ui/` 디렉토리에 컴포넌트 관리
  - 필요시 커스터마이징하여 사용

### 2.3 백엔드 및 인증
- **Supabase**: 
  - 인증(Auth) 처리
  - 데이터베이스(PostgreSQL) 관리
  - 실시간 기능 활용 가능

### 2.4 AI 연동
- **AI SDK**: AI 모델 연동
  - 다양한 AI 모델 지원
  - 스트리밍 응답 처리

### 2.5 코드 품질
- **ESLint**: Next.js 및 TypeScript 규칙 기반
  - 모든 린트 규칙 준수 필수
  - 커밋 전 린트 검사 권장

## 3. 코딩 스타일

### 3.1 컴포넌트 작성 규칙
- **함수형 컴포넌트만 사용**: 클래스 컴포넌트 사용 금지
- **화살표 함수 사용**: 모든 함수는 화살표 함수로 작성
  ```typescript
  // ✅ 올바른 예시
  const TodoList = () => {
    return <div>할 일 목록</div>;
  };
  
  // ❌ 잘못된 예시
  function TodoList() {
    return <div>할 일 목록</div>;
  }
  ```

### 3.2 파일 명명 규칙
- **컴포넌트 파일명**: 파스칼 케이스 사용
  - 예: `TodoList.tsx`, `UserProfile.tsx`, `TaskCard.tsx`
- **유틸리티 파일명**: 케이블 케이스 사용
  - 예: `format-date.ts`, `api-client.ts`
- **훅 파일명**: `use-` 접두사 + 케이블 케이스
  - 예: `use-todo.ts`, `use-auth.ts`

### 3.3 주석 작성 규칙
- **한글 주석 필수**: 모든 함수와 컴포넌트에 한글 주석 작성
- **함수/컴포넌트 상단**: 한 문장으로 개요 작성
- **JSDoc 형식**: 상세 설명은 JSDoc으로 한글로 기술

```typescript
/**
 * 할 일 목록을 표시하는 컴포넌트
 * @description 사용자의 할 일 목록을 카드 형태로 표시하고, 완료/삭제 기능을 제공합니다.
 * @param {Todo[]} todos - 표시할 할 일 목록
 * @param {Function} onToggleComplete - 완료 상태 토글 핸들러
 * @param {Function} onDelete - 삭제 핸들러
 * @returns {JSX.Element} 할 일 목록 컴포넌트
 */
const TodoList = ({ todos, onToggleComplete, onDelete }: TodoListProps) => {
  // 컴포넌트 로직
};
```

### 3.4 변수 및 함수 명명 규칙
- **명확한 변수명 사용**: 누가 봐도 알 수 있게 명확하게 작성
  - 예: `isLoading` (O), `loading` (X)
  - 예: `userEmail` (O), `email` (X, 컨텍스트가 불명확한 경우)
- **함수명은 동사로 시작**: 
  - 예: `fetchTodos`, `handleSubmit`, `validateInput`

### 3.5 에러 처리 코드 작성
- **에러가 날 수 있는 부분은 미리 처리**: 
  - null/undefined 체크
  - 타입 가드 활용
  - Optional chaining (`?.`) 적극 활용
  - 기본값 설정 (Nullish coalescing `??`)

```typescript
// ✅ 안전한 코드
const userName = user?.name ?? '익명 사용자';
const todoCount = todos?.length ?? 0;

// ❌ 위험한 코드
const userName = user.name; // user가 null일 수 있음
```

### 3.6 ESLint 규칙 준수
- 모든 ESLint 규칙을 준수해야 함
- 커밋 전에 린트 오류가 없어야 함
- 필요시 `.eslintignore`에 예외 파일만 추가

## 4. 추가 개발 가이드라인

### 4.1 타입 정의
- 모든 props와 함수 파라미터에 타입 정의 필수
- `any` 타입 사용 지양, `unknown` 사용 권장
- 인터페이스와 타입 별칭 적절히 활용

### 4.2 상태 관리
- 로컬 상태: `useState`, `useReducer` 활용
- 서버 상태: Server Components와 Server Actions 활용
- 전역 상태: 필요시 Context API 또는 상태 관리 라이브러리 활용

### 4.3 성능 최적화
- `React.memo` 적절히 활용 (불필요한 리렌더링 방지)
- `useMemo`, `useCallback` 적절히 활용
- 이미지 최적화: Next.js Image 컴포넌트 사용

### 4.4 접근성 (Accessibility)
- 시맨틱 HTML 태그 사용
- ARIA 속성 적절히 활용
- 키보드 네비게이션 지원

### 4.5 코드 리뷰 체크리스트
- [ ] 한글 주석이 모든 함수/컴포넌트에 작성되었는가?
- [ ] ESLint 오류가 없는가?
- [ ] 타입 오류가 없는가?
- [ ] 로딩/빈 상태/오류 상태 UI가 제공되는가?
- [ ] 에러 처리가 적절히 구현되었는가?
- [ ] 변수명이 명확한가?
- [ ] 화살표 함수로 작성되었는가?
